<!--
  Generated template for the Checkout page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Checkout</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <div *ngIf="cartObject.cartitems.length; else emptyCart">
    <ion-card *ngFor="let sub of cartObject.cartitems">
      <ion-card-header>
        {{sub.subName}}
        <ion-icon name="trash" class="pull-right light-gray" (click)="removeCartItem(sub.subid)"></ion-icon>
      </ion-card-header>
      <ion-card-content>
        <ion-row>
          <ion-col col-12>
            <ion-item>
              <ion-label>Start Date</ion-label>
              <ion-datetime displayFormat="MMM DD YYYY" [min]='startDate' [(ngModel)]="sub.startdate" (ionChange)='getSubscriptionMenu(sub)'></ion-datetime>
            </ion-item>
          </ion-col>
          <ion-col>
            <ion-item>
              <ion-label>End Date</ion-label>
              <ion-datetime displayFormat="MMM DD YYYY" disabled='true' [(ngModel)]="sub.enddate"></ion-datetime>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label>Quantity</ion-label>
              <ion-select [(ngModel)]="sub.selectedQtyPlan">
                <ion-option *ngFor="let plan of sub.prices" [value]="plan">{{plan.person}}</ion-option>
              </ion-select>
            </ion-item>
          </ion-col>
        </ion-row>
      </ion-card-content>
      <ion-card-header class="top-border">
        Price
        <span class="pull-right"> KD 120.000</span>
      </ion-card-header>
      <button ion-button clear icon-left block color='lightGreen' (click)='editSubscription()'>
        <ion-icon name="ios-create-outline"></ion-icon>
        <div>Edit Subscription </div>
      </button>
    </ion-card>
    <ion-card>
      <ion-footer>
        <ion-toolbar>
          <span class="amount"><b>Total : KD 2000.000</b></span>
          <button ion-button color="yellow" (click)='placeOrder()' class="pull-right">
              Place Order
            </button>
        </ion-toolbar>
      </ion-footer>
    </ion-card>
  </div>

  <ng-template #emptyCart>
    <div text-center class="empty-cart">
      <p>No Subscription</p>
      <img src="assets/images/restaurant.svg">
    </div>
    <ion-footer>
      <div padding-horizontal class="btn">
        <button type="button" ion-button block color='lightGreen' round=false (click)='openSubscription()'>Browse Subscriptions</button>
      </div>
    </ion-footer>
  </ng-template>

</ion-content>
